<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div
        style="border: 2px solid black;width: 600px; height:300px; position: relative; left: 450px; background-color: rgb(244, 242, 233);top: 150px; ">
        <div style="position: relative; left: 50px;">
            <div class="question"
                style="border: 1.5px solid black;width:300px; height:70px;margin:70px; padding-left: 50px; border-radius:99px;align-items: center;align-content: center;background-color: blanchedalmond;">
            </div>
            <div class="option"
                style=" cursor: pointer;   border: 1px solid black; width: 150px; height:30px; border-radius: 20px;margin-top: -50px; margin-left: 50px; text-align: center; ">
            </div>
            <div class="option"
                style="   cursor: pointer; border: 1px solid black; width: 160px; height: 30px; border-radius: 20px; margin-left:270px;margin-top: -31px;text-align: center;">
            </div>
            <div class="option"
                style="   cursor: pointer; border: 1px solid black; width: 150px; height: 30px; border-radius:30px; margin-top:20px;margin-left: 45px;text-align: center;">
            </div>
            <div class="option"
                style="  cursor: pointer; border: 1px solid black; width: 168px; height: 30px; border-radius:20px; margin-left: 270px;margin-top:-30px; text-align: center;">
            </div>
            <button class="result" style=" cursor: pointer;  position: relative; left:220px;top: 20px;">Next</button>
            <div
                style="border: 1px solid black;border-radius: 50%;width: 30px;height:30px; position: relative; top: -20px;left: -20px;">
                <span class="timer" style="position: relative;left: 10px; bottom: -9px; ">10</span>
            </div>
        </div>
    </div>
    <script> questionsarray = [

            "which INDIAN Captain won the  ICC Trophies in All Formates.",
            "who has fastest knockout in UFC history",
            "Who has score the 100 international Centuries",
            "who is Richest UFC fighter in the History",
            "which player has Highest Runs in IPL ",
            "Top crypto currency",
            "which crypto has 20million$ Marketcap",
            "2023 IPL winners",
            "PKL 9th Season winner",
            "which Team has won 5 Titles in IPL"
        ]
        opptionsarray = [

            ["Ms Dhoni", "Virat", "sachin", "kapil"],
            ["Kabhib", "Nate", "Conor", "Aldo Jose"],
            ["Sachin", " Virat Kohli", "MS Dhoni", "Rohit"],
            ["Conor", "Jon Jones", "Jonny Walker", "Usman"],
            ["Virat", "Dhoni", "Raina", "Warner"],
            ["Vechain", "Doge coin", "Solona", "Bitcoin"],
            ["Zill", "XRP", "TRX", "ICE"],
            ["MI", "RCB", "CSK", "KKR"],
            ["TT", "BB", "PP", "JP"],
            ["CSK", "SRH", "RCB", "KKR"]
        ]

        ////\
       var answer=[];

        questions = document.getElementsByClassName("question");
        options = document.getElementsByClassName("option");
        butto = document.getElementsByClassName("result");
        timer = document.getElementsByClassName("timer");

        //serversratr
        click = 0;
        prevclick = null;
        for (let i = 0; i < options.length; i++) {

            console.log("dfgh")

            options[i].addEventListener("click", () => {

                if (prevclick) {
                    prevclick.style.backgroundColor = "";
                }

                // Set the background color of the clicked option
                options[i].style.backgroundColor = "grey";

                // Update prevclick to the current option
                prevclick = options[i];

            })




        }







        //server end







        //timing and clicking over



        //outside
        var k = random();
        questions[0].innerText = questionsarray[k];

        for (j = 0; j < opptionsarray[k].length; j++) {
            options[j].innerText = opptionsarray[k][j];
        }
        var str = "";
        str += k;
        //outsdiee
        ////timer

        var start = Number(timer[0].innerText);
        var fir = Number(timer[0].innerText);

        //var ct = 0;
        c = 0;
        var g = setInterval(
            () => {
                if (start >= 0) {
                    timer[0].innerText = start;
                    start--;
                } else {
                    var obj={
                                question:"",
                                answer:""
                            }

                    for(let i=0;i<options.length;i++)
                    {
                        if(options[i].style.backgroundColor=="grey")
                        {
                          

                            obj.question=questions[0].innerText;
                            obj.answer=options[i].innerText;
                            
                        }
                    }
                    console.log(obj);
                    answer.push(obj);

                    //fetch
                    // fetch("http://localhost:3000/posts",{method:"POST",
                    // headers: {
                    //         'Content-Type': 'application/json'
                    //     },
                    //     body: JSON.stringify(obj)

                    // });
                    // //fetchend



                    if (c < questionsarray.length - 1) {
                        var i = random();

                        while (str.includes(i)) {
                            i = random();
                        }
                        str += i;
                        var checking=i;
                        questions[0].innerText = questionsarray[i];

                        for (j = 0; j < opptionsarray[i].length; j++) {
                            options[j].innerText = opptionsarray[i][j];
                            options[j].style.backgroundColor="";
                        }
                        c++;
                        start = fir;
                    } else {

                        console.log(answer);
                        clearInterval(g);


                        window.open("./result.html","_self");
                    }
                }
            },

            1000
        );

        //timer


        butto[0].addEventListener("click", () => {


            //options all erase
            // for(let i=0;i<options.length;i++)
            // {
            //     options[i].style.backgroundColor=="";
            // }
            // //end

            //console.log(c);
            //console.log(str);
                        var obj={
                                question:"",
                                answer:""
                            }
            for(let i=0;i<options.length;i++)
                    {
                        if(options[i].style.backgroundColor=="grey")
                        {
                          

                            obj.question=questions[0].innerText;
                            obj.answer=options[i].innerText;
                            
                        }
                    }
            console.log(obj)
            answer.push(obj);



            // if (str.length > 1) {
            if (c < questionsarray.length - 1) {
               
               
               
                var i = random();

                while (str.includes(i)) {
                    i = random();
                }
                str += i;

                questions[0].innerText = questionsarray[i];

                for (j = 0; j < opptionsarray[i].length; j++) {
                    options[j].innerText = opptionsarray[i][j];
                    options[j].style.backgroundColor="";
                }
                c++;
                start = fir;
            }
            else {
                console.log(answer);
                var obj1={answer:answer}

                 fetch("http://localhost:3000/posts/2",{method:"PATCH",
                    headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(obj1)

                    });
                   


                window.open("./result.html","_self");
            }
            //}
            //  else {
            //   if (c < questionsarray.length - 1) {
            //     var i = random();

            //     while (str.includes(i)) {
            //       i = random();
            //     }
            //     str += i;

            //     questions[0].innerText = questionsarray[i];

            //     for (j = 0; j < opptionsarray[i].length; j++) {
            //       options[j].innerText = opptionsarray[i][j];
            //     }
            //     c++;
            //   }
            // }

        });

        //rabdom

        function random() {
            var index = Math.floor(Math.random() * questionsarray.length);
            return index;
        }
        //reandom


        //////



    </script>




</body>

</html>